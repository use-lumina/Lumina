# Lumina Environment Variables

# =============================================================================
# Node Environment
# =============================================================================
NODE_ENV=development # development | production | test

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================
DATABASE_URL=postgres://lumina:lumina@localhost:5432/lumina
DB_MAX_CONNECTIONS=10
DB_QUERY_TIMEOUT_MS=30000

# =============================================================================
# Redis Configuration (for semantic score caching)
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# =============================================================================
# Anthropic API (for semantic scoring)
# =============================================================================
ANTHROPIC_API_KEY=sk-ant-your-api-key-here

# =============================================================================
# NATS Configuration
# =============================================================================
NATS_URL=nats://localhost:4222
NATS_STREAM=lumina-traces
NATS_CONSUMER=lumina-ingestion-consumer
NATS_MAX_RETRIES=3

# =============================================================================
# Service Ports
# =============================================================================
INGESTION_PORT=8080
API_PORT=8081
REPLAY_PORT=8082

# Server Configuration
HOST=0.0.0.0
CORS_ORIGIN=*
LOG_LEVEL=info # debug | info | warn | error

# =============================================================================
# Authentication & Authorization
# =============================================================================
# JWT secret for dashboard authentication (generate with: openssl rand -base64 32)
JWT_SECRET=your-secret-key-here-replace-in-production
JWT_EXPIRY=24h

# API key cache TTL (seconds)
API_KEY_CACHE_TTL=300

# =============================================================================
# Webhooks & Notifications
# =============================================================================
# Slack webhook URL for alerts
SLACK_WEBHOOK_URL=

# Discord webhook URL for alerts
DISCORD_WEBHOOK_URL=

# PagerDuty API key
PAGERDUTY_API_KEY=

# Webhook settings
WEBHOOK_TIMEOUT_MS=5000
WEBHOOK_RETRY_ATTEMPTS=3

# =============================================================================
# Alert Configuration
# =============================================================================
ALERTS_ENABLED=true

# Cost spike threshold (percentage above baseline)
COST_SPIKE_THRESHOLD_PERCENT=20

# Quality score threshold (0-1, alert if below this)
QUALITY_SCORE_THRESHOLD=0.7

# Latency spike threshold (percentage above baseline)
LATENCY_SPIKE_THRESHOLD_PERCENT=50

# Baseline calculation window
BASELINE_WINDOW=24h # 1h | 24h | 7d

# How often to recalculate baselines (milliseconds)
BASELINE_CALCULATION_INTERVAL_MS=300000

# =============================================================================
# Replay Service Configuration
# =============================================================================
MAX_CONCURRENT_REPLAYS=5
REPLAY_TIMEOUT_MS=60000

# =============================================================================
# SDK Configuration (for customer apps)
# =============================================================================
# API key for SDK authentication (get this from dashboard)
LUMINA_API_KEY=lumina_live_your_api_key_here

# Ingestion endpoint
LUMINA_ENDPOINT=http://localhost:8080/ingest

# Environment (live or test)
LUMINA_ENVIRONMENT=live

# Batching configuration
LUMINA_BATCH_SIZE=10
LUMINA_BATCH_INTERVAL_MS=5000

# Retry configuration
LUMINA_MAX_RETRIES=3
LUMINA_TIMEOUT_MS=10000

# Enable/disable SDK
LUMINA_ENABLED=true